import{d as R,r as d,u as z,a as $,o as j,n as w,b as _,c as E,e as g,f as c,g as t,h as S,i as V,j as m,k as f,t as A,w as v,s as k,l as C,m as N,p as T,q,v as F,F as H,x as I,y as O,z as U,_ as K}from"./index-CH0RtBGW.js";import{p as L,_ as M}from"./DifficultyTag.vue_vue_type_script_setup_true_lang-gGtqeSFm.js";const W="/assets/wall-C-B50s48.svg",X="/assets/climber-white-BCXmoKOH.svg",G={class:"overflow-hidden bg-white rounded-[16px] relative route-card",style:{"box-shadow":"rgba(0, 0, 0, 0.35) 0px 5px 15px",position:"relative",width:"100%",height:"100%"}},J={class:"absolute top-2 left-2 right-2 flex items-center gap-2 z-10 pointer-events-none"},P={class:"text-xs sm:text-sm bg-white text-primary rounded-md whitespace-nowrap size-fit p-1 px-2 truncate flex-shrink",style:{"max-width":"calc(100% - 80px)"}},Q={class:"absolute bottom-2 left-2 right-2 px-2 flex gap-1.5 justify-end items-center z-10"},Y={class:"flex justify-end gap-2"},Z=R({__name:"RouteView",props:{route:{}},setup(h){const i=d(null),n=d(!1),l=d(1),r=d(!1),x=z(),B=$();let p=null;const a=h;j(()=>{i.value&&(p=new ResizeObserver(s=>{const e=s[0];if(e){const{width:u,height:o}=e.contentRect;u>0&&o>0&&(l.value=u/o,n.value=u/o>.78)}}),p.observe(i.value),w(()=>{if(i.value){const s=i.value.getBoundingClientRect();s.width>0&&s.height>0&&(l.value=s.width/s.height,n.value=s.width/s.height>.78)}}))}),_(async()=>{if(await w(),i.value&&p){const s=i.value.getBoundingClientRect();s.width>0&&s.height>0&&(l.value=s.width/s.height,n.value=s.width/s.height>.78)}}),E(()=>{p&&p.disconnect()});function b(s){x.push({path:s,query:{id:a.route.id}})}function y(){T.send({type:"preview",route:a.route})}function D(){a.route.id&&(B.deleteRoute(a.route.id),r.value=!1)}return(s,e)=>{const u=N;return c(),g("div",{ref_key:"box",ref:i,class:"flex items-center justify-center relative w-full h-full min-h-0"},[t("div",{class:S(["bg-cover bg-center aspect-[0.78] flex items-center justify-center",{"h-full max-w-full":n.value,"w-full max-h-full":!n.value}]),style:{"min-width":"0","min-height":"0"}},[t("div",G,[t("div",{class:"relative bg-cover bg-center m-[4px] rounded-[12px] pt-5 flex items-center justify-center overflow-hidden",style:V({backgroundImage:`url(${m(L)})`,minHeight:0})},[...e[8]||(e[8]=[t("img",{src:W,class:"w-full h-auto object-contain max-h-full",style:{"max-width":"100%"}},null,-1)])],4),t("div",J,[t("div",P,A(a.route.name),1),f(M,{grade:a.route.data.grade,class:"flex-shrink-0"},null,8,["grade"])]),t("div",Q,[t("button",{class:"mr-auto flex justify-center items-center bg-[#ED6A5A] text-white h-[36px] w-[36px] sm:h-[40px] sm:w-[40px] rounded-full p-2 flex-shrink-0 pointer-events-auto",style:{"box-shadow":`rgba(50, 50, 93, 0.25) 0px 13px 27px -5px,
                rgba(0, 0, 0, 0.3) 0px 8px 16px -8px`},onClick:e[0]||(e[0]=o=>b("/session"))},[...e[9]||(e[9]=[t("div",{class:"text-primary font-light flex items-center gap-1 text-xs"},[t("img",{src:X,class:"h-[18px] w-[18px] sm:h-[22px] sm:w-[22px] inline-block fill-black"})],-1)])]),t("button",{class:"flex justify-center items-center border bg-white border-primary text-white h-[28px] w-[28px] sm:h-[32px] sm:w-[32px] p-1.5 sm:p-2 rounded-full flex-shrink-0 pointer-events-auto",style:{"box-shadow":`rgba(50, 50, 93, 0.25) 0px 13px 27px -5px,
                rgba(0, 0, 0, 0.3) 0px 8px 16px -8px`},onClick:e[1]||(e[1]=o=>y())},[...e[10]||(e[10]=[t("span",{class:"pi pi-eye text-primary inline-block",style:{"font-size":"11px","font-weight":"100"}},null,-1)])]),t("button",{class:"flex justify-center items-center border bg-white border-primary text-white h-[28px] w-[28px] sm:h-[32px] sm:w-[32px] p-1.5 sm:p-2 rounded-full flex-shrink-0 pointer-events-auto",style:{"box-shadow":`rgba(50, 50, 93, 0.25) 0px 13px 27px -5px,
                rgba(0, 0, 0, 0.3) 0px 8px 16px -8px`},onClick:e[2]||(e[2]=o=>b("/edit"))},[...e[11]||(e[11]=[t("span",{class:"pi pi-file-edit text-primary inline-block",style:{"font-size":"11px","font-weight":"100"}},null,-1)])]),t("button",{class:"flex justify-center items-center border bg-white border-primary text-white h-[28px] w-[28px] sm:h-[32px] sm:w-[32px] p-1.5 sm:p-2 rounded-full flex-shrink-0 pointer-events-auto",style:{"box-shadow":`rgba(50, 50, 93, 0.25) 0px 13px 27px -5px,
                rgba(0, 0, 0, 0.3) 0px 8px 16px -8px`},onClick:e[3]||(e[3]=o=>y())},[...e[12]||(e[12]=[t("span",{class:"pi pi-arrow-right-arrow-left text-primary inline-block",style:{"font-size":"11px","font-weight":"100"}},null,-1)])]),t("button",{class:"flex justify-center items-center border bg-white border-primary text-white h-[28px] w-[28px] sm:h-[32px] sm:w-[32px] p-1.5 sm:p-2 rounded-full flex-shrink-0 pointer-events-auto",style:{"box-shadow":`rgba(50, 50, 93, 0.25) 0px 13px 27px -5px,
                rgba(0, 0, 0, 0.3) 0px 8px 16px -8px`},onClick:e[4]||(e[4]=o=>r.value=!0)},[...e[13]||(e[13]=[t("span",{class:"pi pi-trash text-primary inline-block",style:{"font-size":"11px","font-weight":"100"}},null,-1)])]),f(u,{visible:r.value,"onUpdate:visible":e[7]||(e[7]=o=>r.value=o),modal:"",header:"Delete route",style:{width:"25rem"},class:"text-sm"},{default:v(()=>[e[16]||(e[16]=t("span",{class:"text-surface-500 dark:text-surface-400 block mb-8"},"Are you sure you want to delete this route?",-1)),t("div",Y,[f(m(k),{type:"button",label:"Cancel",severity:"secondary",onClick:e[5]||(e[5]=o=>r.value=!1)},{default:v(()=>[...e[14]||(e[14]=[C(" Cancel ",-1)])]),_:1}),f(m(k),{type:"button",label:"Delete",onClick:e[6]||(e[6]=o=>D())},{default:v(()=>[...e[15]||(e[15]=[C("Delete",-1)])]),_:1})])]),_:1},8,["visible"])])])],2)],512)}}}),ee={class:"relative h-full overflow-x-hidden overflow-y-auto routes-view-container"},te={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-6 pb-[120px]"},se=R({__name:"RoutesView",setup(h){const i=$();z();const n=O();return q(),j(()=>{i.getRoutes()}),_(async()=>{await i.getRoutes(),await w(),window.dispatchEvent(new Event("resize"))}),F(()=>n.path,async l=>{l==="/routes"&&(await i.getRoutes(),await w(),setTimeout(()=>{window.dispatchEvent(new Event("resize"))},100))},{immediate:!1}),(l,r)=>(c(),g("div",ee,[t("div",te,[(c(!0),g(H,null,I(m(i).routes,x=>(c(),U(Z,{key:x.id,class:"w-full route-view-item",route:x},null,8,["route"]))),128))])]))}}),ne=K(se,[["__scopeId","data-v-d22a2725"]]);export{ne as default};
